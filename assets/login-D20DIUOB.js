import{_ as y,u as A,G as T,H as C,a as $,aq as q,ar as m,as as P,at as p,o as B,b as F,w as r,d as s,ai as I,aj as R,an as j,ao as M,f as g,t as f,z as N,au as U,j as o,av as D,ak as b,E,e as L,V as z,C as v,I as G}from"./index-DfpASpyj.js";import{v as H}from"./index-D_bu8BXa.js";const J={class:"text-center"},V={__name:"login",setup(K){const{t:e}=A(),{api:w}=G(),c=T(),h=C(),_=$(),x=q({account:m().required(e("api.userAccountRequired")).min(4,e("api.userAccountTooShort")).max(15,e("api.userAccountTooLong")).test("isAlphanumeric",e("api.userAccountInvalid"),a=>H.isAlphanumeric(a)),password:m().required(e("api.userPasswordRequired")).min(4,e("api.userPasswordTooShort")).max(15,e("api.userPasswordTooLong"))}),{handleSubmit:S,isSubmitting:d}=P({validationSchema:x}),u=p("account"),i=p("password"),k=S(async a=>{var t,n;try{const{data:l}=await w.post("/user/login",{account:a.account,password:a.password});_.login(l.result),c({text:e("login.success"),snackbarProps:{color:"rgb(117, 117, 117)"}}),h.push("/home")}catch(l){console.log(l),c({text:e("api."+(((n=(t=l==null?void 0:l.response)==null?void 0:t.data)==null?void 0:n.message)||"unknownError")),snackbarProps:{color:"rgb(212, 135, 141)"}})}});return(a,t)=>(B(),F(z,{class:"login-container"},{default:r(()=>[s(I,{justify:"center"},{default:r(()=>[s(R,{cols:"12",md:"8",lg:"6"},{default:r(()=>[s(j,{class:"pa-5 form-card"},{default:r(()=>[s(M,{class:"text-center text-h4 login"},{default:r(()=>[g(f(a.$t("nav.login")),1)]),_:1}),s(N,{class:"my-3"}),s(U,{disabled:o(d),onSubmit:D(o(k),["prevent"])},{default:r(()=>[s(b,{modelValue:o(u).value.value,"onUpdate:modelValue":t[0]||(t[0]=n=>o(u).value.value=n),"error-messages":o(u).errorMessage.value,label:a.$t("user.account"),"prepend-inner-icon":"mdi-account",minlength:"4",maxlength:"15",counter:""},null,8,["modelValue","error-messages","label"]),s(b,{modelValue:o(i).value.value,"onUpdate:modelValue":t[1]||(t[1]=n=>o(i).value.value=n),type:"password","error-messages":o(i).errorMessage.value,label:a.$t("user.password"),"prepend-inner-icon":"mdi-lock",minlength:"4",maxlength:"15",counter:""},null,8,["modelValue","error-messages","label"]),E("div",J,[s(L,{loading:o(d),type:"submit",color:"#a49393"},{default:r(()=>[g(f(a.$t("login.submit")),1)]),_:1},8,["loading"])])]),_:1},8,["disabled","onSubmit"])]),_:1})]),_:1})]),_:1})]),_:1}))}};typeof v=="function"&&v(V);const W=y(V,[["__scopeId","data-v-85095df7"]]);export{W as default};
