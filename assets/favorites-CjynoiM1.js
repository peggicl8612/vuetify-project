import{_ as h,G as y,K as d,c as f,O as P,o as c,b as p,w as s,d as t,ai as v,aj as m,E as w,z as B,h as F,F as A,i as N,an as j,x as D,ao as E,f as _,t as I,ap as M,e as S,am as T,V as $,C as V,I as z}from"./index-Ddi7Cczv.js";const u=6,g={__name:"favorites",setup(G){const{apiAuth:i}=z(),l=y(),r=d([]),k=async()=>{try{const{data:a}=await i.get("/user/favorites");r.value=a.result}catch(a){console.error(a),l({text:"獲取收藏列表失敗",snackbarProps:{color:"pink"}})}},x=async a=>{try{await i.delete(`/user/favorites/${a}`),r.value=r.value.filter(e=>e._id!==a),l({text:"已取消收藏",snackbarProps:{color:"brown"}})}catch(e){console.error(e),l({text:"取消收藏失敗",snackbarProps:{color:"pink"}})}},n=d(1),C=f(()=>Math.ceil(r.value.length/u)),b=f(()=>{const a=(n.value-1)*u,e=a+u;return r.value.slice(a,e)});return P(k),(a,e)=>(c(),p($,null,{default:s(()=>[t(v,null,{default:s(()=>[t(m,{cols:"12"},{default:s(()=>[e[1]||(e[1]=w("h1",{class:"text-center"},"收藏列表",-1)),t(B)]),_:1})]),_:1}),t(v,null,{default:s(()=>[(c(!0),F(A,null,N(b.value,o=>(c(),p(m,{key:o._id,cols:"12",md:"4"},{default:s(()=>[t(j,{class:"mb-4 card-hover"},{default:s(()=>[t(D,{src:o.image,height:"200px",class:"rounded-top"},null,8,["src"]),t(E,{class:"text-center"},{default:s(()=>[_(I(o.name),1)]),_:2},1024),t(M,{class:"justify-center"},{default:s(()=>[t(S,{class:"ma-1",onClick:K=>x(o._id)},{default:s(()=>e[2]||(e[2]=[_("取消收藏 💔")])),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1}),t(T,{modelValue:n.value,"onUpdate:modelValue":e[0]||(e[0]=o=>n.value=o),length:C.value,circle:"",class:"mt-4"},null,8,["modelValue","length"])]),_:1}))}};typeof V=="function"&&V(g);const O=h(g,[["__scopeId","data-v-1f9acc8a"]]);export{O as default};
