import{_,u as E,G as M,H as R,K as y,aq as B,ar as t,aZ as F,as as N,at as c,o as U,b as j,w as l,d as o,ai as D,aj as L,an as z,ao as G,f as w,t as h,z as H,au as K,j as e,av as O,ak as m,E as Z,e as J,p as Q,V as W,C,I as X}from"./index-DTRXapC9.js";import{v as x}from"./index-BnlxoLfd.js";const Y={class:"text-center mt-2"},k={__name:"register",setup(ee){const{t:s}=E(),{api:P}=X(),V=M(),q=R(),i=y(!1),u=y(!1),S=()=>{i.value=!i.value},$=()=>{u.value=!u.value},I=B({account:t().required(s("api.userAccountRequired")).min(4,s("api.userAccountTooShort")).max(15,s("api.userAccountTooLong")).test("isAlphanumeric",s("api.userAccountInvalid"),a=>x.isAlphanumeric(a)),email:t().required(s("api.userEmailRequired")).test("isEmail",s("api.userEmailInvalid"),a=>x.isEmail(a)),password:t().required(s("api.userPasswordRequired")).min(4,s("api.userPasswordTooShort")).max(15,s("api.userPasswordTooLong")),passwordConfirm:t().required(s("api.userPasswordConfirm")).oneOf([F("password")],s("api.userPasswordNotMatch")),phone:t().nullable().notRequired()}),{handleSubmit:A,isSubmitting:b}=N({validationSchema:I}),p=c("account"),g=c("email"),f=c("password"),v=c("passwordConfirm"),T=A(async a=>{var r,n;try{await P.post("/user",{account:a.account,email:a.email,password:a.password}),V({text:s("register.success"),snackbarProps:{color:"rgb(117, 117, 117)"}}),q.push("/login")}catch(d){console.log(d),V({text:s("api."+(((n=(r=d==null?void 0:d.response)==null?void 0:r.data)==null?void 0:n.message)||"unknownError")),snackbarProps:{color:"rgb(212, 135, 141)"}})}});return(a,r)=>(U(),j(W,{class:"register-container"},{default:l(()=>[o(D,{justify:"center"},{default:l(()=>[o(L,{cols:"8",md:"10",lg:"8"},{default:l(()=>[o(z,{class:"pa-5 form-card"},{default:l(()=>[o(G,{class:"text-center text-h4 register"},{default:l(()=>[w(h(a.$t("nav.register")),1)]),_:1}),o(H,{class:"my-3"}),o(K,{disabled:e(b),onSubmit:O(e(T),["prevent"])},{default:l(()=>[o(m,{modelValue:e(p).value.value,"onUpdate:modelValue":r[0]||(r[0]=n=>e(p).value.value=n),"error-messages":e(p).errorMessage.value,label:a.$t("user.account"),"prepend-inner-icon":"mdi-account",minlength:"4",maxlength:"15",counter:""},null,8,["modelValue","error-messages","label"]),o(m,{modelValue:e(g).value.value,"onUpdate:modelValue":r[1]||(r[1]=n=>e(g).value.value=n),"error-messages":e(g).errorMessage.value,label:a.$t("user.email"),"prepend-inner-icon":"mdi-email"},null,8,["modelValue","error-messages","label"]),o(m,{modelValue:e(f).value.value,"onUpdate:modelValue":r[2]||(r[2]=n=>e(f).value.value=n),type:i.value?"text":"password","error-messages":e(f).errorMessage.value,label:a.$t("user.password"),"prepend-inner-icon":"mdi-lock","append-inner-icon":i.value?"mdi-eye-off":"mdi-eye",minlength:"4",maxlength:"15",counter:"",class:"input-field","onClick:appendInner":S},null,8,["modelValue","type","error-messages","label","append-inner-icon"]),o(m,{modelValue:e(v).value.value,"onUpdate:modelValue":r[3]||(r[3]=n=>e(v).value.value=n),type:u.value?"text":"password","error-messages":e(v).errorMessage.value,label:a.$t("user.passwordConfirm"),"prepend-inner-icon":"mdi-check","append-inner-icon":u.value?"mdi-eye-off":"mdi-eye",minlength:"4",maxlength:"15",counter:"","onClick:appendInner":$},null,8,["modelValue","type","error-messages","label","append-inner-icon"]),Z("div",Y,[o(J,{loading:e(b),type:"submit",color:"#a49393"},{default:l(()=>[o(Q,null,{default:l(()=>r[4]||(r[4]=[w("mdi-account-plus")])),_:1}),w(" "+h(a.$t("register.submit")),1)]),_:1},8,["loading"])])]),_:1},8,["disabled","onSubmit"])]),_:1})]),_:1})]),_:1})]),_:1}))}};typeof C=="function"&&C(k);const re=_(k,[["__scopeId","data-v-53f957c9"]]);export{re as default};
